<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clay County Master Portal</title>
    <style>
        /* --- 1. GLOBAL LAYOUT (Locked) --- */
        body { margin: 0; padding: 0; background: #121212; color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .my-perfect-layout { display: flex; flex-direction: column; min-height: 100vh; width: 100%; }
        header { background: #1f1f1f; padding: 20px; text-align: center; border-bottom: 3px solid #00ff00; }
        footer { text-align: center; padding: 20px; color: #444; font-size: 0.8rem; margin-top: auto; }

        /* --- 2. FLEXIBLE FLOW (No Overlapping) --- */
        #content-area { flex: 1; width: 100%; padding: 20px; box-sizing: border-box; position: relative; }
        #content-area > * { position: relative !important; display: block !important; width: 100% !important; margin-bottom: 20px; clear: both; }

        /* --- 3. RESPONSIVE RULES --- */
        @media (max-width: 980px) { header h1 { font-size: 1.2rem; } #content-area { padding: 10px; } }
        @media (min-width: 1600px) { #content-area { max-width: 1440px; margin: 0 auto; } }
    </style>
</head>
<body>

<div class="my-perfect-layout">
    <header><h1>Clay County Portal</h1></header>
    <div id="content-area">
        </div>
    <footer>Â© 2026 Clay County</footer>
</div>

<script>
async function loadPortal() {
    const contentDiv = document.getElementById('content-area');
    
    try {
        // 1. FETCH SHOPPING LISTS: Grabs your text files containing the URLs
        const [jsonListResponse, htmlListResponse] = await Promise.all([
            fetch('https://kfruti88.github.io/master.html/Promise.all'),
            fetch('https://kfruti88.github.io/master.html/looks.all')
        ]);

        const jsonUrls = await jsonListResponse.text();
        const htmlUrls = await htmlListResponse.text();

        // 2. GET THE LABEL: Identifies the town/category from WordPress
        const urlParams = new URLSearchParams(window.location.search);
        const label = urlParams.get('type') || 'default';

        // 3. THE ROUTER: Logic to pick the right file based on the label
        if (label.includes('gas')) {
            // Use your specific Gas URL
            const fuelUrl = "https://kfruti88.github.io/Clay-County-Fuel/gas_prices.json";
            const res = await fetch(fuelUrl);
            const fuelData = await res.json();
            
            // Build the Fuel Board HTML
            contentDiv.innerHTML = `<h2>Live Gas Prices</h2><div id="gas-board"></div>`;
            renderFuelBoard(fuelData); 
        } 
        else {
            // FALLBACK: Use a static page layout
            contentDiv.innerHTML = `<iframe src="https://kfruti88.github.io/clay-county-news/index.html" style="width:100%; height:1200px; border:none;"></iframe>`;
        }

    } catch (e) {
        contentDiv.innerHTML = `<div style="color:#ff4444; text-align:center; padding:40px;">
            <strong>Sync Error:</strong> ${e.message}
        </div>`;
    }
}

// Helper function to build the gas data
function renderFuelBoard(data) {
    const board = document.getElementById('gas-board');
    if (!board) return;
    // Your logic to map through JSON and create HTML elements goes here
}

// Initialize the portal
loadPortal();
</script>
</body>
</html>
